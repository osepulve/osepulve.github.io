---
layout: page
---
{{ content }}

{% if page.collection %}
  {% assign all_items = site[page.collection] %}
  
  {% comment %} 
    1. FORCE SEPARATION 
    We create two distinct arrays. 
  {% endcomment %}
  {% assign mentoring_items = "" | split: "," %}
  {% assign rest_of_items = "" | split: "," %}

  {% for item in all_items %}
    {% if item.category == "Mentoring" %}
      {% assign mentoring_items = mentoring_items | push: item %}
    {% else %}
      {% assign rest_of_items = rest_of_items | push: item %}
    {% endif %}
  {% endfor %}

  {% comment %} 2. MENTORING SECTION {% endcomment %}
  {% if mentoring_items.size > 0 %}
    <h2 class="category">Mentoring</h2>
    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 40px;">
      {% for item in mentoring_items %}
        <figure class="cover" style="margin: 0; width: 150px;">
          <a class="cover-link" href="{{ item.url | relative_url }}">
            <img src="{% if item.cover %}{{ item.cover | relative_url }}{% else %}http://covers.openlibrary.org/b/isbn/{{ item.isbn }}-L.jpg?default=false{% endif %}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
            <figcaption style="text-align: center; font-size: 0.7rem; margin-top: 5px;">{{ item.title | truncate: 20 }}</figcaption>
          </a>
        </figure>
      {% endfor %}
    </div>
    <hr style="border-top: 1px solid #eee; margin: 2rem 0;">
  {% endif %}

  {% comment %} 3. YEAR GROUPING (The original logic, but using the filtered list) {% endcomment %}
  {% assign year = "" %}
  {% assign sorted_others = rest_of_items | reverse %}
  
  {% for item in sorted_others %}
    {% assign current_year = item.date | date: '%Y' %}
    {% if current_year != year %}
      {% unless forloop.first %}</ul>{% endunless %}
      <h1 id="y{{ current_year }}" style="margin-top: 2rem;">
        <a href="{{ current_year | prepend: '/books/' | relative_url }}">{{ current_year }}</a>
      </h1>
      <ul style="list-style: none; display: flex; flex-wrap: wrap; gap: 20px; padding: 0;">
      {% assign year = current_year %}
    {% endif %}

    <li>
      <figure class="cover" style="margin: 0; width: 150px;">
        <a class="cover-link" href="{{ item.url | relative_url }}">
          <img src="{% if item.cover %}{{ item.cover | relative_url }}{% elsif item.isbn %}http://covers.openlibrary.org/b/isbn/{{ item.isbn }}-L.jpg?default=false{% else %}http://covers.openlibrary.org/b/olid/{{ item.olid }}-L.jpg?default=false{% endif %}" style="width: 100%; height: 200px; object-fit: cover;">
          <figcaption style="text-align: center; font-size: 0.7rem;">{{ item.status | upcase | default: "READ" }}</figcaption>
        </a>
      </figure>
    </li>
    {% if forloop.last %}</ul>{% endif %}
  {% endfor %}
{% endif %}
