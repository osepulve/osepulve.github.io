---
layout: page
---
{{ content }}

{% if page.collection %}
  {% assign all_items = site[page.collection] %}
  
  {% comment %} 
    1. Group items by category 
  {% endcomment %}
  {% assign category_groups = all_items | group_by: "category" %}

  {% for group in category_groups %}
    {% if group.name != nil and group.name != "" %}
      
      {% comment %} The Clickable Heading {% endcomment %}
      <h2 class="category">
        <a href="{{ '/books/' | append: group.name | downcase | relative_url }}" style="text-decoration: none; color: inherit;">
          {{ group.name }} <small>ðŸ”—</small>
        </a>
      </h2>

      <div class="bookshelf-grid" style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 40px;">
        {% for item in group.items %}
          <figure class="cover" style="margin: 0; width: 150px;">
            <a class="cover-link" href="{{ item.url | relative_url }}">
              <img src="{% if item.cover %}{{ item.cover | relative_url }}{% else %}http://covers.openlibrary.org/b/isbn/{{ item.isbn }}-L.jpg?default=false{% endif %}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px;">
            </a>
          </figure>
        {% endfor %}
      </div>
      <hr>
    {% endif %}
  {% endfor %}

  {% comment %} 
    2. The Remaining Books (By Year) 
    Only shows books that have NO category assigned.
  {% endcomment %}
  {% assign uncategorized = all_items | where: "category", nil %}
  {% if uncategorized.size > 0 %}
    <h2 class="category">Recent Reads</h2>
    {% assign year = "" %}
    {% for item in uncategorized reversed %}
      {% assign current_year = item.date | date: '%Y' %}
      {% if current_year != year %}
        <h3 id="y{{ current_year }}" style="margin-top: 2rem;">{{ current_year }}</h3>
        <ul style="list-style: none; display: flex; flex-wrap: wrap; gap: 20px; padding: 0;">
        {% assign year = current_year %}
      {% endif %}
      <li>
        <img src="{{ item.cover | relative_url }}" style="width: 120px; height: 170px; object-fit: cover;">
      </li>
      {% if forloop.last %}</ul>{% endif %}
    {% endfor %}
  {% endif %}
{% endif %}
